<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Hello Createjs</title>
	<script src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>
	<script>
	var stage, canvas, loader;
	function init(){
		canvas = document.getElementById("gameCanvas");
		stage = new createjs.Stage(canvas);

		createjs.Ticker.addEventListener("tick", tick);
		createjs.Ticker.setFPS(30);

		var manifest = [
			{src:"assets/Graphics/Characters/01 - Hero.png", id:"hero"},
		];

		loader = new createjs.LoadQueue(false);
		loader.addEventListener("complete", handleLoadComplete);
		loader.loadManifest(manifest);
	};

	function handleLoadComplete(){


		document.onkeydown = function(event){
			switch(event.keyCode){
				case 87:
					bmpAnimation.gotoAndPlay("back");
					break;
				case 68:
					bmpAnimation.gotoAndPlay("right");
					break;
				case 83:
					bmpAnimation.gotoAndPlay("front");
					break;
				case 65:
					bmpAnimation.gotoAndPlay("left");
					break;
			}
		}

		document.onkeyup = function(event){
			switch(event.keyCode){
				case 87:
				case 68:
				case 83:
				case 65:
					//bmpAnimation.stop();
			}
		}

		var spriteSheet = new createjs.SpriteSheet({
			images:[loader.getResult("hero")],
			frames:[
				[0,0,24,32,0,12,16],
				[24,0,24,32,0,12,16],
				[48,0,24,32,0,12,16],
				[0,32,24,32,0,12,16],
				[24,32,24,32,0,12,16],
				[48,32,24,32,0,12,16],
				[0,64,24,32,0,12,16],
				[24,64,24,32,0,12,16],
				[48,64,24,32,0,12,16],
				[0,96,24,32,0,12,16],
				[24,96,24,32,0,12,16],
				[48,96,24,32,0,12,16],
			],
			animations:{
				front:{
					frames:[0,1,2],
					speed:0.3
				},
				left:{
					frames:[3,4,5],
					speed:0.3
				},
				right:{
					frames:[6,7,8],
					speed:0.3
				},
				back:{
					frames:[9,10,11],
					speed:0.3
				},
			}
		});

		var bmpAnimation = new createjs.Sprite(spriteSheet);
		/*bmpAnimation.gotoAndPlay("front");
		var mask = new createjs.Shape();
		mask.graphics.beginFill("#f00").drawRect(0,0,24,32);
		bmpAnimation.mask = mask;
		bmpAnimation.shadow = new createjs.Shadow("#454", 0, 0, 200);*/
		bmpAnimation.x = 12;
		bmpAnimation.y = 16;
		bmpAnimation.scaleX = bmpAnimation.scaleY = 1;
		stage.addChild(bmpAnimation);
		var hero = new Character();
	}

	function tick(){
		stage.update();
	}

	function Character(){
		this.initialize();
	}

	Character.prototype = new createjs.Shape();

	Character.prototype.initialize = function(){
		console.log("initialized");
	}


	</script>
</head>
<body onload="init();">
	<div>
		<canvas id="gameCanvas" width="500" height="500"></canvas>
	</div>
</body>
</html>